<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../button-link/button-link.html">
<link rel="import" href="../image-thumbnail/image-thumbnail.html">
<link rel="import" href="../iron-flex-layout/iron-flex-layout-classes.html">

<!--
A polymer web component that shows an image-thumnail component with a button-link component.

Example:

        <image-thumbnail-with-link
          link="http://link"
          source="http://source"
          style-class="style-class"
          target="_blank"
          text="Click Me"
          click-listener="[[listener]]">
        </image-thumbnail-with-link>

@demo demo/index.html
-->

<dom-module id="image-thumbnail-with-link">
  <template>
    <style include="iron-flex iron-flex-alignment"></style>

    <style>
      :host {
        display: block;
      }

      div {
        padding: 10px;
      }

      div:hover {
        background-color: rgba(0,0,0,0.1);
      }

      button-link {
        margin-top: 10px;
      }
    </style>

    </style>

    <div class="layout vertical center" on-mouseover="startHover" on-mouseout="endHover">
      <image-thumbnail
        source="[[source]]"
        style-class="[[styleClass]]"
        click-property="[[clickProperty]]"
        click-listener="[[clickListener]]"
        click-value="[[clickValue]]">
      </image-thumbnail>

      <button-link
        link="[[link]]"
        target="[[target]]"
        text="[[text]]"
        show="[[hovering]]">
      </button-link>
    </div>
  </template>

  <script>
  (function() {
    'use strict';

    Polymer({
      is: 'image-thumbnail-with-link',

      properties: {
        /**
         * The link URL to open information within the application.
         */
        link: {
          type: String,
          value: ''
        },

        /**
         * The source URL of the image.
         */
        source: {
          type: String,
          value: ''
        },

        /**
         * The style class of the image.
         */
        styleClass: {
          type: String,
          value: ''
        },

        /**
         * The link target.
         */
        target: {
          type: String,
          value: '_self'
        },

        /**
         * The link text.
         */
        text: {
          type: String,
          value: ''
        },

        /**
         * An object with a function property called if the image is clicked or tapped.
         * The name of the property in the object is defined in clickProperty.
         */
        clickListener: {
          type: Object,
          value: function() {
            return {
              onClick: function() {}
            };
          }
        },

        /**
         * The name of the function property in clickListener.
         */
        clickProperty: {
          type: String,
          value: 'onClick'
        },

        /**
         * The value to be given to the clickListener.
         */
        clickValue: {
          type: Number,
          value: 0
        },

        /**
         * Whether the user is hovering over the image container.
         */
        hovering: {
          type: Boolean,
          value: false,
          notify: true
        }
      },

      /**
       * Sets the hovering property when the user mouses over the element.
       */
      startHover: function() {
        this.set('hovering', true);
      },

      /**
       * Unsets the hovering property when the user mouses over the element.
       */
      endHover: function() {
        this.set('hovering', false);
      }
    });
  })();
  </script>
</dom-module>
