<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../button-link/button-link.html">
<link rel="import" href="../image-thumbnail/image-thumbnail.html">
<link rel="import" href="../iron-flex-layout/iron-flex-layout-classes.html">

<!--
A Polymer Element showing an image-thumnail component and a button-link element.

### Example
```html
<image-thumbnail-with-link
  link="http://link"
  source="http://source"
  style-class="style-class"
  target="_blank"
  text="Click Me"
  click-listener="[[listener]]">
</image-thumbnail-with-link>
```

@demo demo/index.html
-->

<dom-module id="image-thumbnail-with-link">
  <template>
    <style include="iron-flex iron-flex-alignment"></style>

    <style>
      :host {
        display: block;
      }

      div {
        padding: 10px;
      }

      div:hover {
        background-color: rgba(0,0,0,0.1);
      }

      button-link {
        margin-top: 10px;
      }
    </style>

    </style>

    <div class="layout vertical center" on-mouseover="_startHover" on-mouseout="_endHover">
      <image-thumbnail
        source="[[source]]"
        style-class="[[styleClass]]"
        click-property="[[clickProperty]]"
        click-listener="[[clickListener]]"
        click-value="[[clickValue]]">
      </image-thumbnail>

      <button-link
        link="[[link]]"
        target="[[target]]"
        text="[[text]]"
        show="[[hovering]]">
      </button-link>
    </div>
  </template>

  <script>
  (function() {
    'use strict';

    Polymer({
      is: 'image-thumbnail-with-link',

      properties: {
        /**
         * (Required)
         *
         * The link URL to open information within the application.
         *
         * @type {String}
         * @default ''
         */
        link: {
          type: String,
          value: ''
        },

        /**
         * (Required)
         *
         * The source URL of the image.
         *
         * @type {String}
         * @default ''
         */
        source: {
          type: String,
          value: ''
        },

        /**
         * (Optional)
         *
         * The style class of the image.
         *
         * @type {String}
         * @default ''
         */
        styleClass: {
          type: String,
          value: ''
        },

        /**
         * (Optional)
         *
         * The link target.
         *
         * @type {String}
         * @default '_self'
         */
        target: {
          type: String,
          value: '_self'
        },

        /**
         * (Required)
         *
         * The link text.
         *
         * @type {String}
         * @default ''
         */
        text: {
          type: String,
          value: ''
        },

        /**
         * (Required)
         *
         * An object with a function property called if the image is clicked or tapped.
         * The name of the property in the object is defined in clickProperty.
         *
         * @type {Object}
         * @default {onClick: function() {}}
         */
        clickListener: {
          type: Object,
          value: function() {
            return {
              onClick: function() {}
            };
          }
        },

        /**
         * (Optional)
         *
         * The name of the function property in clickListener.
         *
         * @type {String}
         * @default 'onClick'
         */
        clickProperty: {
          type: String,
          value: 'onClick'
        },

        /**
         * (Optional)
         *
         * The value to be given to the clickListener.
         *
         * @type {Number}
         * @default 0
         */
        clickValue: {
          type: Number,
          value: 0
        },

        /**
         * (Optional)
         *
         * Whether the user is hovering over the image container.
         *
         * @type {Boolean}
         * @default false
         */
        hovering: {
          type: Boolean,
          value: false,
          notify: true
        }
      },

      /**
       * Sets the hovering property when the user mouses over the element.
       *
       * @event mouseover
       * @private
       */
      _startHover: function() {
        this.set('hovering', true);
      },

      /**
       * Unsets the hovering property when the user mouses over the element.
       *
       * @event mouseout
       * @private
       */
      _endHover: function() {
        this.set('hovering', false);
      }
    });
  })();
  </script>
</dom-module>
